<!DOCTYPE html>

<html lang="en">
	<body>
		<div class="main">
			<a href="index.html">Back</a>
			<h1>Text Lossy Compression</h1>
			<p>Lossy compression removes data from files that is unlikely to be noticeable. It is often used on images, audio, and videos. However, there is no way for a general purpose algorithm to know which bits will important for the file since there are so many different types of files. Instead this program just removes the desired amount of bits randomly and hopes for the best.</p>
			<p>Enter a text string as well as the compression amount and it will create a compressed version. This program was made as a joke, for serious purposes this would probably break your program/file.</p>
			<div>
				<label for="in">Original Text</label><br>
				<textarea id="in" onchange="compress()"></textarea>
			</div>
			<div>
				<label for="in2">Compression %:</label>
				<input type="number" value="50" id="in2" onchange="compress()">
			</div>
			<div>
				<label for="out">Output</label><br>
				<textarea id="out" readonly></textarea> 
			</div>
		</div>
	</body>
	<script>
		function compress(){
			text=document.getElementById("in").value;
			n=text.length;
			p=[...Array(n).keys()];
			output="";
			for(let i=0;i<n;i++){
				let x=Math.floor(Math.random()*(n-i))+i;
				[p[x],p[i]]=[p[i],p[x]];
			}
			K=parseInt(document.getElementById("in2").value);
			K=Math.max(0,Math.min(100,K));
			K=Math.ceil(n*K/100);
			for(let i=0;i<n;i++) if(p[i]<K) output+=text[i];
			document.getElementById("out").value=output;
		}
	</script>
</html>